# 抖音火花助手

抖音火花助手是一个 Tampermonkey 用户脚本，用于自动续抖音火花。它可以帮助你自动管理聊天对象，发送定制化的消息，以及自动化一些重复性任务。

## 功能特性

- 自动抓取聊天列表到暂存区
- 支持将对象添加为续火花目标
- 为每个对象设置个性化模板
- 支持变量 `$date`、`$targetName`、`$sinceDate()`
- 宏管理系统
- 定时发送功能
- Monaco Editor 代码编辑器支持

## 安装方法
### 油猴
    1. 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展
    2. 点击安装链接或手动导入脚本
    3. 访问抖音创作者中心的聊天页面即可使用

### 脚本猫
    1. 安装 [ScriptCat](https://github.com/scriptscat/scriptcat) 浏览器扩展
    2. 点击安装链接或手动导入脚本
    3. 访问抖音创作者中心的聊天页面即可使用



## 多 CDN 支持

为了提高 Monaco Editor 的加载可靠性并解决浏览器跟踪预防阻止访问存储的问题，本脚本支持多个 CDN 源：

1. **jsDelivr**: `https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/`
2. **cdnjs**: `https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/`
3. **unpkg**: `https://unpkg.com/monaco-editor@latest/min/vs/`

脚本会按顺序尝试从这些 CDN 加载 Monaco Editor，如果第一个 CDN 不可用，则自动尝试下一个，从而提高加载成功率。使用 Tampermonkey 的 `GM_xmlhttpRequest` API 来绕过浏览器的跟踪预防限制。

## 使用说明

1. 脚本会在抖音聊天页面自动运行
2. 点击页面上的"续火目标管理"面板来管理你的续火花对象
3. 可以将聊天对象添加到续火花目标列表
4. 为每个目标设置个性化的消息模板
5. 使用宏系统来增强模板功能
6. 设置定时发送功能来自动发送消息

## 注意事项

- 本脚本仅在抖音创作者后台的聊天页面有效
- 发送消息间隔不宜过短，建议保持3秒以上间隔
- 请确保在发送消息前已正确登录抖音创作者后台

## 兼容性

- 支持Chrome、Firefox、Edge等主流浏览器
- 需要安装Tampermonkey或类似用户脚本管理器

## 更新日志

### v1.0.5 (2026-01-17)
- **新增粗略匹配以解决无法自动为群聊发消息的问题**
  - **解决方案** 如果分类中不含有该目标则遍历其它分类，直至找到目标或遍历完所有分类。
  - **效果** 在无重名的朋友以及群聊的情况下，可以成功为群聊发送消息。

- **新增已添加目标一键全选功能**

### v1.0.4 (2026-01-06)
- **又错了......**
  - **修正了作者GitHub项目地址**：
    `https://github.com/WordlMargin2/DouyinFireTool`
    `https://github.com/WordlMargin2/DouYinFireTool`

### v1.0.3 (2026-01-06)

- **修正了作者GitHub项目地址**：不小心写少了，我就说怎么死活进不去：
  `https://github.com/WordlMargin/DouyinFireTool`
  `https://github.com/WordlMargin2/DouyinFireTool`

### v1.0.2 (2026-01-03)

- **修复了一些已知问题**：
  
  - 修复了由于原来的eval函数内`let res`与一般逻辑:`res+=xxx`导致结果前出现undefined的问题；解决方案：将`let res`改为`let res=""`
  - 修复了由于默认模板`return xxx`导致的宏功能无法执行的问题；解决方案：将`return xxx`改为`res=xxx`

- **新增了一些功能**：
  
  - 新增了`自动发送选项`，选择该选项后将会在进入聊天页面时自动检查当天是否发送过消息，如果未发送则自动发送

### v1.0.1 (2026-01-02)

- **宏管理界面美化**：全面优化宏管理界面的视觉设计
  - 采用现代化渐变背景和增强的视觉层次
  - 改进悬停效果和交互反馈
  - 优化亮色/暗色主题适配
  - 增强滚动条和表单元素样式
  - 添加视觉指示器区分启用/禁用的宏
  - 改进宏列表和表单布局

### v1.0.0

- **初始版本发布**
- **自动抓取聊天列表**：自动获取抖音创作者后台的聊天列表到暂存区
- **续火花目标管理**：支持将聊天对象添加为续火花目标，并设置个性化模板
- **模板系统**：支持变量替换（$date、$targetName、$sinceDate()）和简单条件语句
- **批量发送**：支持选中多个对象批量发送消息
- **定时发送**：可设置每日定时发送消息给所有续火花目标
- **Monaco编辑器**：集成Monaco编辑器提供强大的代码编辑体验，支持语法高亮和自动补全
- **主题切换**：支持亮色/暗色主题切换，可跟随系统主题
- **界面可定制**：面板可拖动、调整大小和最小化

## 版本信息

- 当前版本：1.0.1
- 作者：WorldMargin

## 许可证

本项目仅供学习交流使用，请勿用于商业用途。使用本脚本所产生的任何后果由使用者自行承担。